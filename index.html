<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selamat Ulang Tahun Ratu Yudha Pratiwi! ğŸ‰</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .hero-section {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            background-size: 300% 300%;
            animation: gradientShift 4s ease infinite;
            color: white;
            text-align: center;
            padding: 100px 0;
            position: relative;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .floating-balloons {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .balloon {
            position: absolute;
            font-size: 2rem;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
        }

        .birthday-title {
            font-size: 3.5rem;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: titlePulse 2s ease-in-out infinite alternate;
        }

        @keyframes titlePulse {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }

        .birthday-name {
            font-size: 4rem;
            font-weight: 800;
            background: linear-gradient(45deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: rainbow 3s linear infinite;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        @keyframes rainbow {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }

        .wish-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            margin-bottom: 30px;
        }

        .wish-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        }

        .interactive-btn {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border: none;
            color: white;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 50px;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .interactive-btn:hover {
            background: linear-gradient(45deg, #4ecdc4, #ff6b6b);
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #ff6b6b;
            animation: confetti-fall 3s linear forwards;
            pointer-events: none;
            z-index: 1000;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .cake-container {
            text-align: center;
            margin: 50px 0;
        }

        .cake {
            font-size: 8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .cake:hover {
            transform: scale(1.2) rotate(5deg);
        }

        .candle {
            font-size: 2rem;
            margin: 0 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .candle.blown {
            opacity: 0.3;
            transform: scale(0.8);
        }

        .memory-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .memory-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .memory-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .countdown {
            font-size: 2rem;
            font-weight: bold;
            color: #ff6b6b;
            text-align: center;
            margin: 30px 0;
        }

        .music-player {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50px;
            padding: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .volume-control {
            width: 80px;
        }

        .surprise-message {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin: 30px 0;
            text-align: center;
            display: none;
        }

        .photo-slider-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            backdrop-filter: blur(10px);
        }

        .photo-slider-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 800px;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .slider-header {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .close-slider {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 2rem;
            cursor: pointer;
            background: none;
            border: none;
            color: white;
            transition: all 0.3s ease;
        }

        .close-slider:hover {
            transform: scale(1.2);
            color: #ff6b6b;
        }

        .photo-carousel {
            position: relative;
            height: 400px;
            overflow: hidden;
        }

        .photo-slide {
            display: none;
            width: 100%;
            height: 100%;
            position: relative;
            background: linear-gradient(45deg, #667eea, #764ba2);
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.5rem;
            text-align: center;
        }

        .photo-slide.active {
            display: flex;
        }

        .photo-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .slider-controls {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.8);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .slider-controls:hover {
            background: white;
            transform: translateY(-50%) scale(1.1);
        }

        .prev-btn {
            left: 10px;
        }

        .next-btn {
            right: 10px;
        }

        .slider-dots {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
        }

        .dot {
            display: inline-block;
            width: 12px;
            height: 12px;
            background: #ddd;
            border-radius: 50%;
            margin: 0 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .dot.active, .dot:hover {
            background: #ff6b6b;
            transform: scale(1.2);
        }

        .audio-visualizer {
            position: fixed;
            bottom: 80px;
            right: 20px;
            display: none;
            flex-direction: row;
            align-items: end;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            height: 50px;
            gap: 2px;
        }

        .audio-bar {
            width: 4px;
            background: linear-gradient(to top, #ff6b6b, #4ecdc4);
            margin: 0 1px;
            border-radius: 2px;
            height: 10px;
        }

        .music-loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            color: white;
            font-size: 1.5rem;
            display: none;
        }
    </style>
</head>
<body>
    <!-- Music Loading Indicator -->
    <div class="music-loading" id="musicLoading">
        <div class="text-center">
            <div class="spinner-border text-primary mb-3" style="width: 3rem; height: 3rem;"></div>
            <p>Memuat musik...</p>
        </div>
    </div>

    <!-- Hero Section -->
    <div class="hero-section">
        <div class="floating-balloons">
            <div class="balloon" style="left: 10%; animation-delay: 0s;">ğŸˆ</div>
            <div class="balloon" style="left: 20%; animation-delay: 1s;">ğŸ‰</div>
            <div class="balloon" style="left: 30%; animation-delay: 2s;">ğŸ‚</div>
            <div class="balloon" style="left: 70%; animation-delay: 1.5s;">ğŸˆ</div>
            <div class="balloon" style="left: 80%; animation-delay: 0.5s;">ğŸŠ</div>
            <div class="balloon" style="left: 90%; animation-delay: 2.5s;">ğŸ</div>
        </div>
        
        <div class="container">
            <h1 class="birthday-title">ğŸ‰ Selamat Ulang Tahun! ğŸ‰</h1>
            <h2 class="birthday-name">Ratu Yudha Pratiwi</h2>
            <p class="lead fs-3 mt-4">Semoga hari istimewa ini penuh dengan kebahagiaan! âœ¨</p>
            
            <button class="interactive-btn" onclick="createConfetti()">
                <i class="fas fa-sparkles"></i> Ledakkan Confetti!
            </button>
            <button class="interactive-btn" onclick="showSurprise()">
                <i class="fas fa-gift"></i> Buka Kejutan!
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container my-5">
        <!-- Kue Ulang Tahun Interaktif -->
        <div class="cake-container">
            <h3 class="text-center text-white mb-4">ğŸ‚ Tiup Lilin Ulang Tahun! ğŸ‚</h3>
            <div class="cake" onclick="blowAllCandles()">ğŸ‚</div>
            <div class="mt-3">
                <span class="candle" onclick="blowCandle(this)">ğŸ•¯ï¸</span>
                <span class="candle" onclick="blowCandle(this)">ğŸ•¯ï¸</span>
                <span class="candle" onclick="blowCandle(this)">ğŸ•¯ï¸</span>
                <span class="candle" onclick="blowCandle(this)">ğŸ•¯ï¸</span>
                <span class="candle" onclick="blowCandle(this)">ğŸ•¯ï¸</span>
            </div>
            <p class="text-white text-center mt-3">Klik lilin untuk meniupnya satu per satu, atau klik kue untuk meniup semua!</p>
        </div>

        <!-- Pesan Kejutan -->
        <div class="surprise-message" id="surpriseMessage">
            <h3>ğŸŠ Kejutan Spesial! ğŸŠ</h3>
            <p class="fs-4">Ratu Yudha Pratiwi adalah sosok yang luar biasa! Semoga tahun ini membawa banyak kebahagiaan, kesuksesan, dan mimpi yang terwujud. Kamu layak mendapatkan semua hal terbaik di dunia! ğŸ’–</p>
            <div class="mt-4">
                <button class="btn btn-light btn-lg" onclick="generateWish()">
                    <i class="fas fa-magic"></i> Generate Ucapan Random
                </button>
            </div>
            <div id="randomWish" class="mt-3 fs-5"></div>
        </div>

        <!-- Kartu Ucapan -->
        <div class="row">
            <div class="col-lg-4 mb-4">
                <div class="wish-card p-4">
                    <div class="text-center">
                        <i class="fas fa-heart text-danger fs-1 mb-3"></i>
                        <h4>Dengan Cinta ğŸ’•</h4>
                        <p>Semoga hari ulang tahunmu dipenuhi dengan cinta dari orang-orang terkasih. Kamu adalah pribadi yang special dan layak mendapatkan semua kebahagiaan!</p>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 mb-4">
                <div class="wish-card p-4">
                    <div class="text-center">
                        <i class="fas fa-star text-warning fs-1 mb-3"></i>
                        <h4>Bintang Kehidupan â­</h4>
                        <p>Seperti bintang di langit, kamu menerangi hidup orang-orang di sekitarmu. Semoga tahun ini menjadi tahun yang penuh prestasi dan pencapaian!</p>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 mb-4">
                <div class="wish-card p-4">
                    <div class="text-center">
                        <i class="fas fa-rainbow text-info fs-1 mb-3"></i>
                        <h4>Pelangi Harapan ğŸŒˆ</h4>
                        <p>Setiap hari adalah kesempatan baru untuk berbinar. Semoga umurmu yang bertambah membawa lebih banyak warna dan kegembiraan!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gallery Kenangan -->
        <div class="text-center mb-4">
            <h3 class="text-white">ğŸ“¸ Gallery Moment Bahagia ğŸ“¸</h3>
        </div>
        <div class="memory-gallery">
            <div class="memory-card">
                <div class="card-body p-4">
                    <div class="text-center">
                        <i class="fas fa-camera text-primary fs-1 mb-3"></i>
                        <h5>Kenangan Indah</h5>
                        <p>Setiap foto menceritakan kisah kebahagiaan yang tak terlupakan. Semoga album kehidupanmu selalu dipenuhi moment-moment berharga!</p>
                        <button class="btn btn-primary" onclick="animateCard(this)">ğŸ’« Animate</button>
                    </div>
                </div>
            </div>
            
            <div class="memory-card">
                <div class="card-body p-4">
                    <div class="text-center">
                        <i class="fas fa-music text-success fs-1 mb-3"></i>
                        <h5>Melodi Kehidupan</h5>
                        <p>Hidup adalah simfoni yang indah, dan kamu adalah komposer dari lagu hidupmu sendiri. Terus berkarya dan berkreasi!</p>
                        <button class="btn btn-success" onclick="animateCard(this)">ğŸµ Animate</button>
                    </div>
                </div>
            </div>
            
            <div class="memory-card">
                <div class="card-body p-4">
                    <div class="text-center">
                        <i class="fas fa-gift text-danger fs-1 mb-3"></i>
                        <h5>Hadiah Terbaik</h5>
                        <p>Hadiah terbaik dalam hidup adalah keberadaanmu yang membawa kegembiraan bagi semua orang. Terima kasih telah menjadi berkah!</p>
                        <button class="btn btn-danger" onclick="animateCard(this)">ğŸ Animate</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Countdown -->
        <div class="wish-card p-4">
            <h4 class="text-center mb-3">â° Sudah Berapa Lama Hari Spesial Ini? â°</h4>
            <div class="countdown" id="countdown">Loading...</div>
            <p class="text-center text-muted">Waktu berlalu sejak tengah malam hari ulang tahunmu!</p>
        </div>

        <!-- Action Buttons -->
        <div class="text-center my-5">
            <button class="interactive-btn" onclick="rainbowAnimation()">
                <i class="fas fa-rainbow"></i> Rainbow Mode
            </button>
            <button class="interactive-btn" onclick="floatingHearts()">
                <i class="fas fa-heart"></i> Flying Hearts
            </button>
            <button class="interactive-btn" onclick="partyMode()">
                <i class="fas fa-disco-ball"></i> Party Mode
            </button>
            <button class="interactive-btn" onclick="openPhotoSlider()">
                <i class="fas fa-images"></i> Gallery Foto
            </button>
        </div>
    </div>

    <!-- Photo Slider Modal -->
    <div class="photo-slider-modal" id="photoSlider">
        <div class="photo-slider-content">
            <div class="slider-header">
                <h3><i class="fas fa-camera"></i> Gallery Kenangan Ratu Yudha Pratiwi <i class="fas fa-heart"></i></h3>
                <button class="close-slider" onclick="closePhotoSlider()">&times;</button>
            </div>
            
            <div class="photo-carousel">
                <div class="photo-slide active">
                    <div style="background-image: url('./foto.jpg');
                                background-repeat: no-repeat;
                                background-size: cover;
                                background-position: center;  " class="d-flex flex-column justify-content-center align-items-center h-100 p-4">
                        <h4>Moment Bahagia</h4>
                        <p>"Setiap foto adalah kenangan yang tak ternilai. Semoga album kehidupanmu selalu dipenuhi kebahagiaan!"</p>
                    </div>
                </div>
                
                <div class="photo-slide">
                    <div class="d-flex flex-column justify-content-center align-items-center h-100 p-4">
                        <i class="fas fa-star" style="font-size: 4rem; margin-bottom: 20px; color: #feca57;"></i>
                        <h4>Bintang Kehidupan</h4>
                        <p>"Kamu adalah bintang yang menerangi hidup orang-orang di sekitarmu. Tetap berkilau!"</p>
                    </div>
                </div>
                
                <div class="photo-slide">
                    <div class="d-flex flex-column justify-content-center align-items-center h-100 p-4">
                        <i class="fas fa-heart" style="font-size: 4rem; margin-bottom: 20px; color: #ff6b6b;"></i>
                        <h4>Dengan Cinta</h4>
                        <p>"Setiap detik bersamamu adalah anugerah. Semoga umurmu yang bertambah membawa lebih banyak kebahagiaan!"</p>
                    </div>
                </div>
                
                <div class="photo-slide">
                    <div class="d-flex flex-column justify-content-center align-items-center h-100 p-4">
                        <i class="fas fa-gift" style="font-size: 4rem; margin-bottom: 20px; color: #4ecdc4;"></i>
                        <h4>Hadiah Terbaik</h4>
                        <p>"Keberadaanmu adalah hadiah terbaik bagi semua orang. Terima kasih telah menjadi berkah dalam hidup kami!"</p>
                    </div>
                </div>
                
                <div class="photo-slide">
                    <div class="d-flex flex-column justify-content-center align-items-center h-100 p-4">
                        <i class="fas fa-rainbow" style="font-size: 4rem; margin-bottom: 20px; color: #96ceb4;"></i>
                        <h4>Pelangi Harapan</h4>
                        <p>"Semoga tahun ini menjadi tahun yang penuh warna, prestasi, dan mimpi yang terwujud. Selamat ulang tahun!"</p>
                    </div>
                </div>
                
                <!-- Slider Controls -->
                <button class="slider-controls prev-btn" onclick="previousSlide()">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="slider-controls next-btn" onclick="nextSlide()">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            
            <!-- Slider Dots -->
            <div class="slider-dots">
                <span class="dot active" onclick="currentSlide(1)"></span>
                <span class="dot" onclick="currentSlide(2)"></span>
                <span class="dot" onclick="currentSlide(3)"></span>
                <span class="dot" onclick="currentSlide(4)"></span>
                <span class="dot" onclick="currentSlide(5)"></span>
            </div>
        </div>
    </div>

    <!-- Audio Visualizer -->
    <div class="audio-visualizer" id="audioVisualizer">
        <div class="audio-bar"></div>
        <div class="audio-bar"></div>
        <div class="audio-bar"></div>
        <div class="audio-bar"></div>
        <div class="audio-bar"></div>
        <div class="audio-bar"></div>
        <div class="audio-bar"></div>
        <div class="audio-bar"></div>
        <div class="audio-bar"></div>
        <div class="audio-bar"></div>
    </div>

    <!-- Music Player -->
    <div class="music-player">
        <button class="btn btn-primary rounded-circle" onclick="toggleMusic()" title="Play Birthday Song" id="musicButton">
            <i class="fas fa-music" id="musicIcon"></i>
        </button>
        <input type="range" class="volume-control" id="volumeControl" min="0" max="1" step="0.1" value="0.5">
    </div>

    <!-- Hidden Audio Element -->
    <audio id="birthdayAudio">
        <source src="./Yung_Kai_-_Blue(impuremusic.com).mp3" type="audio/mp3">
        Browser Anda tidak mendukung elemen audio.
    </audio>

    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Array ucapan random
        const wishes = [
            "Semoga semua impianmu menjadi kenyataan! âœ¨",
            "Kamu adalah anugerah terbesar! Selamat ulang tahun! ğŸ‰",
            "Semoga umur panjang dan selalu bahagia! ğŸ¥³",
            "Hari ini adalah hari istimewa untuk orang yang istimewa! ğŸ’–",
            "Semoga tahun ini lebih indah dari tahun sebelumnya! ğŸŒŸ",
            "Tetap jadi pribadi yang menginspirasi! Happy Birthday! ğŸ‚",
            "Semoga kebahagiaan selalu menyertaimu! ğŸŒˆ",
            "Kamu layak mendapatkan semua yang terbaik! ğŸ"
        ];

        // Inisialisasi variabel untuk audio
        let musicPlaying = false;
        let audioContext;
        let audioSource;
        let analyser;
        let audioElement = document.getElementById('birthdayAudio');
        let bars = document.querySelectorAll('.audio-bar');
        let animationFrame;

        // Atur volume awal
        audioElement.volume = 0.5;
        document.getElementById('volumeControl').addEventListener('input', function() {
            audioElement.volume = this.value;
        });

        // Fungsi untuk membuat confetti
        function createConfetti() {
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * window.innerWidth + 'px';
                    confetti.style.background = getRandomColor();
                    confetti.style.animationDelay = Math.random() * 2 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 3000);
                }, i * 20);
            }
        }

        // Fungsi untuk mendapatkan warna random
        function getRandomColor() {
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3', '#54a0ff'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        // Fungsi untuk menampilkan kejutan
        function showSurprise() {
            const surprise = document.getElementById('surpriseMessage');
            surprise.style.display = 'block';
            surprise.scrollIntoView({ behavior: 'smooth' });
            createConfetti();
        }

        // Fungsi untuk meniup lilin
        function blowCandle(candle) {
            candle.classList.add('blown');
            candle.innerHTML = 'ğŸ’¨';
            setTimeout(() => {
                candle.innerHTML = 'ğŸ•¯ï¸';
                candle.classList.remove('blown');
            }, 2000);
        }

        // Fungsi untuk meniup semua lilin
        function blowAllCandles() {
            const candles = document.querySelectorAll('.candle');
            candles.forEach((candle, index) => {
                setTimeout(() => {
                    blowCandle(candle);
                }, index * 200);
            });
            createConfetti();
        }

        // Fungsi untuk generate ucapan random
        function generateWish() {
            const randomWish = wishes[Math.floor(Math.random() * wishes.length)];
            document.getElementById('randomWish').innerHTML = `"${randomWish}"`;
        }

        // Fungsi animasi kartu
        function animateCard(button) {
            const card = button.closest('.memory-card');
            card.style.animation = 'none';
            setTimeout(() => {
                card.style.animation = 'titlePulse 1s ease-in-out 3';
            }, 10);
        }

        // Fungsi rainbow animation
        function rainbowAnimation() {
            document.body.style.animation = 'rainbow 2s linear infinite';
            setTimeout(() => {
                document.body.style.animation = '';
            }, 6000);
        }

        // Fungsi floating hearts
        function floatingHearts() {
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.innerHTML = 'ğŸ’–';
                    heart.style.position = 'fixed';
                    heart.style.left = Math.random() * window.innerWidth + 'px';
                    heart.style.top = window.innerHeight + 'px';
                    heart.style.fontSize = '2rem';
                    heart.style.pointerEvents = 'none';
                    heart.style.zIndex = '1000';
                    heart.style.animation = 'confetti-fall 4s ease-out forwards';
                    document.body.appendChild(heart);
                    
                    setTimeout(() => {
                        heart.remove();
                    }, 4000);
                }, i * 100);
            }
        }

        // Fungsi party mode
        function partyMode() {
            createConfetti();
            floatingHearts();
            rainbowAnimation();
            
            // Animate all cards
            const cards = document.querySelectorAll('.wish-card, .memory-card');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.style.animation = 'titlePulse 0.5s ease-in-out 6';
                }, index * 100);
            });

            // Auto play music in party mode
            if (!musicPlaying) {
                toggleMusic();
            }
        }

        // Fungsi untuk memulai visualizer audio
        function setupAudioVisualizer() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                analyser = audioContext.createAnalyser();
                audioSource = audioContext.createMediaElementSource(audioElement);
                
                audioSource.connect(analyser);
                analyser.connect(audioContext.destination);
                
                analyser.fftSize = 256;
            }
        }

        // Fungsi untuk mengupdate visualizer
        function updateVisualizer() {
            if (!analyser) return;
            
            const bufferLength = analyser.frequencyBinCount;
            const dataArray = new Uint8Array(bufferLength);
            analyser.getByteFrequencyData(dataArray);
            
            // Update bars based on frequency data
            bars.forEach((bar, index) => {
                const value = dataArray[index % bufferLength] / 255;
                const height = value * 40;
                bar.style.height = `${10 + height}px`;
            });
            
            animationFrame = requestAnimationFrame(updateVisualizer);
        }

        // Fungsi toggle music dengan audio visualizer
        function toggleMusic() {
            const icon = document.getElementById('musicIcon');
            const visualizer = document.getElementById('audioVisualizer');
            const musicButton = document.getElementById('musicButton');
            const musicLoading = document.getElementById('musicLoading');
            
            if (musicPlaying) {
                // Pause music
                audioElement.pause();
                icon.className = 'fas fa-music';
                musicButton.classList.remove('btn-success');
                musicButton.classList.add('btn-primary');
                visualizer.style.display = 'none';
                musicPlaying = false;
                
                // Stop visualizer animation
                if (animationFrame) {
                    cancelAnimationFrame(animationFrame);
                }
            } else {
                // Show loading indicator
                musicLoading.style.display = 'flex';
                
                // Play music
                audioElement.play()
                    .then(() => {
                        musicLoading.style.display = 'none';
                        icon.className = 'fas fa-pause';
                        musicButton.classList.remove('btn-primary');
                        musicButton.classList.add('btn-success');
                        visualizer.style.display = 'flex';
                        musicPlaying = true;
                        
                        // Setup and start visualizer
                        setupAudioVisualizer();
                        updateVisualizer();
                        
                        showMusicNotification();
                    })
                    .catch(error => {
                        musicLoading.style.display = 'none';
                        console.error("Error playing audio: ", error);
                        alert("Terjadi error saat memutar musik. Pastikan file musik tersedia.");
                    });
            }
        }

        function showMusicNotification() {
            // Create elegant notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
                color: white;
                padding: 15px 25px;
                border-radius: 50px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                z-index: 2000;
                font-weight: bold;
                animation: slideInRight 0.5s ease-out;
            `;
            notification.innerHTML = 'ğŸµ Memutar Musik Ulang Tahun! ğŸµ';
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideInRight 0.5s ease-out reverse';
                setTimeout(() => notification.remove(), 500);
            }, 3000);
        }

        // Photo Slider Functions
        let currentSlideIndex = 1;

        function openPhotoSlider() {
            document.getElementById('photoSlider').style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            // Start auto-slide
            startAutoSlide();
        }

        function closePhotoSlider() {
            document.getElementById('photoSlider').style.display = 'none';
            document.body.style.overflow = 'auto';
            stopAutoSlide();
        }

        function showSlide(n) {
            const slides = document.querySelectorAll('.photo-slide');
            const dots = document.querySelectorAll('.dot');
            
            if (n > slides.length) currentSlideIndex = 1;
            if (n < 1) currentSlideIndex = slides.length;
            
            slides.forEach(slide => slide.classList.remove('active'));
            dots.forEach(dot => dot.classList.remove('active'));
            
            slides[currentSlideIndex - 1].classList.add('active');
            dots[currentSlideIndex - 1].classList.add('active');
            
            // Add slide transition effect
            slides[currentSlideIndex - 1].style.animation = 'fadeIn 0.5s ease-in-out';
        }

        function nextSlide() {
            showSlide(currentSlideIndex += 1);
        }

        function previousSlide() {
            showSlide(currentSlideIndex -= 1);
        }

        function currentSlide(n) {
            showSlide(currentSlideIndex = n);
        }

        // Auto-slide functionality
        let autoSlideInterval;

        function startAutoSlide() {
            autoSlideInterval = setInterval(() => {
                nextSlide();
            }, 4000); // Change slide every 4 seconds
        }

        function stopAutoSlide() {
            if (autoSlideInterval) {
                clearInterval(autoSlideInterval);
            }
        }

        // Pause auto-slide on hover
        document.addEventListener('DOMContentLoaded', () => {
            const sliderContent = document.querySelector('.photo-slider-content');
            if (sliderContent) {
                sliderContent.addEventListener('mouseenter', stopAutoSlide);
                sliderContent.addEventListener('mouseleave', startAutoSlide);
            }
        });

        // Close slider with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closePhotoSlider();
            }
        });

        // Add CSS animation for fade in
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; transform: scale(0.95); }
                to { opacity: 1; transform: scale(1); }
            }
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
        `;
        document.head.appendChild(style);

        // Countdown timer
        function updateCountdown() {
            const today = new Date();
            const birthday = new Date(today.getFullYear(), today.getMonth(), today.getDate());
            const diff = today - birthday;
            
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            
            document.getElementById('countdown').innerHTML = 
                `${hours} jam ${minutes} menit ${seconds} detik`;
        }

        // Update countdown setiap detik
        setInterval(updateCountdown, 1000);
        updateCountdown();

        // Auto confetti saat halaman dimuat
        window.addEventListener('load', () => {
            setTimeout(createConfetti, 1000);
            
            // Preload audio untuk menghindari lag
            audioElement.load();
        });

        // Efek hover pada balon
        document.querySelectorAll('.balloon').forEach(balloon => {
            balloon.addEventListener('mouseenter', () => {
                balloon.style.transform = 'scale(1.5) rotate(20deg)';
            });
            balloon.addEventListener('mouseleave', () => {
                balloon.style.transform = '';
            });
        });
    </script>
</body>
</html>